# 高仿抖音“经验”频道 (Android 考核作业)

## 项目简介
本项目基于 Android 原生开发 (Kotlin + XML)，高保真还原了抖音“经验”频道的双列瀑布流界面。项目包含核心的卡片展示、网络图片加载、点赞交互以及下拉刷新/上拉加载更多功能，模拟了真实的内容浏览体验。

## 功能列表
- [x] **双列瀑布流布局**：支持不同高度图片的错落展示，还原真实 UI。
- [x] **经验卡片 UI**：包含封面图、标题、用户头像、用户名、点赞数等核心元素。
- [x] **点赞交互**：点击心形图标切换实心/空心状态，数字实时增减，解决了复用错乱问题。
- [x] **数据刷新**：支持下拉刷新重置数据，滑动到底部自动加载更多模拟数据。
- [x] **网络资源**：使用 Glide 加载网络图片，支持占位图与圆角头像处理。

## 技术栈
- **语言**：Kotlin
- **架构**：单 Activity + RecyclerView
- **UI 组件**：ConstraintLayout, CardView, SwipeRefreshLayout
- **图片加载**：Glide 4.16
- **列表管理**：StaggeredGridLayoutManager (交错网格布局)

## 开发总结（考核重点：遇到的技术问题及解决方案）

在开发过程中，我主要解决了以下三个技术难点：

### 1. 瀑布流布局的“图片跳动”与错位问题
**问题描述**：在使用 `StaggeredGridLayoutManager` 时，由于网络图片是异步加载的，ImageView 初始高度为 0。当图片加载完成后，布局高度突变，导致 Item 位置重新计算，出现视觉上的跳动和列表重排。
**优化思路**：
- 采用 **"预设高度占位"** 策略。
- 在数据模型 (`ExperienceItem`) 生成时，预先随机生成图片的高度值。
- 在 `onBindViewHolder` 中，在图片加载**之前**，先通过 `layoutParams.height` 强制设置 ImageView 的高度。这样无论图片何时加载完成，布局空间已经固定，彻底解决了跳动问题。

### 2. RecyclerView 复用机制导致的点赞状态错乱
**问题描述**：快速滑动列表时，新出现的 Item 复用了滚出屏幕的 ViewHolder。如果没有正确重置状态，新 Item 可能会错误地显示旧 Item 的“已点赞”红色心形。
**优化思路**：
- 严格遵循 **"视图与数据绑定"** 原则。
- 在 `onBindViewHolder` 方法中，不依赖视图的默认状态，而是每次都根据当前数据对象的 `isLiked` 字段，显式地设置 `setImageResource`（实心或空心）和颜色过滤器。确保 View 的状态永远由 Model 决定，不受复用机制干扰。

### 3. 瀑布流布局配置与数据刷新闭环
**问题描述**：如何构建像抖音一样支持高度不一的复杂布局，并处理“下拉刷新”与“触底加载”的逻辑冲突。
**实现思路**：
- **布局实现**：选用 `StaggeredGridLayoutManager`（交错网格布局）并设置为双列垂直模式，完美适配不同高度的卡片，配合 `GAP_HANDLING_NONE` 策略防止布局重绘抖动。
- **交互闭环**：整合了 `SwipeRefreshLayout` 与 `RecyclerView` 的滚动监听。
    - **下拉时**：调用数据生成方法并传入 `true`，执行 `list.clear()` 清空旧数据。
    - **触底时**：通过 `!canScrollVertically(1)` 检测到底部，传入 `false` 实现数据的追加 (Append)。
    - 从而实现了从“用户手势”到“数据更新”再到“界面反馈”的完整业务闭环。

## 运行截图
![a917be1b77f5104b3e606448fe1cc9a1](https://github.com/user-attachments/assets/7a9c2c4e-02e0-4088-8eeb-34f1ba1f5702)
